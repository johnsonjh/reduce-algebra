<html>
  <head>
    <title>Berkeley SoftFloat History</title>
  </head>

  <body>
    <h1>History of Berkeley SoftFloat, to Release 3e</h1>

    <p>
      John R. Hauser<br />
      2018 January 20<br />
    </p>

    <h3>Release 3e (2018 January)</h3>

    <ul>
      <li>
        Changed the default numeric code for optional rounding mode
        <code>odd</code> (round to odd, also known as <em>jamming</em>) from 5
        to 6.
      </li>

      <li>
        Modified the behavior of rounding mode <code>odd</code> when rounding to
        an integer value (either conversion to an integer format or a
        &lsquo;<code>roundToInt</code>&rsquo; function). Previously, for those
        cases only, rounding mode <code>odd</code> acted the same as rounding to
        minimum magnitude. Now all operations are rounded consistently.
      </li>

      <li>
        Fixed some errors in the specialization code modeling Intel x86
        floating-point, specifically the integers returned on invalid operations
        and the propagation of NaN payloads in a few rare cases.
      </li>

      <li>
        Added specialization code modeling ARM floating-point, conforming to
        VFPv2 or later.
      </li>

      <li>Added an example target for ARM processors.</li>

      <li>
        Fixed a minor bug whereby function <code>f16_to_ui64</code> might return
        a different integer than expected in the case that the floating-point
        operand is negative.
      </li>

      <li>
        Added example target-specific optimization for GCC, employing GCC
        instrinsics and support for <nobr>128-bit</nobr> integer arithmetic.
      </li>

      <li>Made other minor improvements.</li>
    </ul>

    <h3>Release 3d (2017 August)</h3>

    <ul>
      <li>
        Fixed bugs in the square root functions for
        <nobr>64-bit</nobr> double-precision,
        <nobr>80-bit</nobr> double-extended-precision, and
        <nobr>128-bit</nobr> quadruple-precision. For
        <nobr>64-bit</nobr> double-precision (<code>f64_sqrt</code>), the result
        could sometimes be off by <nobr>1 unit</nobr> in the last place (<nobr
          >1 ulp</nobr
        >) from what it should be. For the larger formats, the square root could
        be wrong in a large portion of the less-significant bits. (A bug in
        <code>f128_sqrt</code> was first reported by Alexei Sibidanov.)
      </li>
    </ul>

    <h3>Release 3c (2017 February)</h3>

    <ul>
      <li>
        Added optional rounding mode <code>odd</code> (round to odd, also known
        as <em>jamming</em>).
      </li>

      <li>
        Corrected the documentation concerning non-canonical representations in
        <nobr>80-bit</nobr> double-extended-precision.
      </li>
    </ul>

    <h3>Release 3b (2016 July)</h3>

    <ul>
      <li>
        Implemented the common <nobr>16-bit</nobr> &ldquo;half-precision&rdquo;
        floating-point format (<code>float16_t</code>).
      </li>

      <li>
        Made the integer values returned on invalid conversions to integer
        formats be determined by the port-specific specialization instead of
        being the same for all ports.
      </li>

      <li>
        Added preprocessor macro <code>THREAD_LOCAL</code> to allow the
        floating-point state (modes and exception flags) to be made per-thread.
      </li>

      <li>
        Modified the provided Makefiles to allow some options to be overridden
        from the
        <code>make</code> command.
      </li>

      <li>Made other minor improvements.</li>
    </ul>

    <h3>Release 3a (2015 October)</h3>

    <ul>
      <li>
        Replaced the license text supplied by the University of California,
        Berkeley.
      </li>
    </ul>

    <h3>Release 3 (2015 February)</h3>

    <ul>
      <li>
        Complete rewrite, funded by the University of California, Berkeley, and
        consequently having a different use license than earlier releases. Major
        changes included renaming most types and functions, upgrading some
        algorithms, restructuring the source files, and making SoftFloat into a
        true library.
      </li>

      <li>
        Added functions to convert between floating-point and unsigned integers,
        both
        <nobr>32-bit</nobr> and <nobr>64-bit</nobr> (<code>uint32_t</code> and
        <code>uint64_t</code>).
      </li>

      <li>
        Added functions for fused multiply-add, for all supported floating-point
        formats except <nobr>80-bit</nobr> double-extended-precision.
      </li>

      <li>
        Added support for a fifth rounding mode, <code>near_maxMag</code> (round
        to nearest, with ties to maximum magnitude, away from zero).
      </li>

      <li>
        Dropped the <code>timesoftfloat</code> program (now part of the Berkeley
        TestFloat package).
      </li>
    </ul>

    <h3>Release 2c (2015 January)</h3>

    <ul>
      <li>Fixed mistakes affecting some <nobr>64-bit</nobr> processors.</li>

      <li>
        Further improved the documentation and the wording for the legal
        restrictions on using SoftFloat releases <nobr>through 2c</nobr> (not
        applicable to <nobr>Release 3</nobr> or later).
      </li>
    </ul>

    <h3>Release 2b (2002 May)</h3>

    <ul>
      <li>
        Made minor updates to the documentation, including improved wording for
        the legal restrictions on using SoftFloat.
      </li>
    </ul>

    <h3>Release 2a (1998 December)</h3>

    <ul>
      <li>
        Added functions to convert between <nobr>64-bit</nobr> integers
        (<code>int64</code>) and all supported floating-point formats.
      </li>

      <li>
        Fixed a bug in all <nobr>64-bit</nobr>-version square root functions
        except <code>float32_sqrt</code> that caused the result sometimes to be
        off by <nobr>1 unit</nobr> in the last place (<nobr>1 ulp</nobr>) from
        what it should be. (Bug discovered by Paul Donahue.)
      </li>

      <li>Improved the Makefiles.</li>
    </ul>

    <h3>Release 2 (1997 June)</h3>

    <ul>
      <li>
        Created the <nobr>64-bit</nobr> (<code>bits64</code>) version, adding
        the <code>floatx80</code> and <code>float128</code> formats.
      </li>

      <li>
        Changed the source directory structure, splitting the sources into a
        <code>bits32</code> and a <code>bits64</code> version. Renamed
        <code>environment.h</code> to <code>milieu.h</code> to avoid confusion
        with environment variables.
      </li>

      <li>
        Fixed a small error that caused <code>float64_round_to_int</code> often
        to round the wrong way in nearest/even mode when the operand was between
        2<sup>20</sup> and 2<sup>21</sup> and halfway between two integers.
      </li>
    </ul>

    <h3>Release 1a (1996 July)</h3>

    <ul>
      <li>
        Corrected a mistake that caused borderline underflow cases not to raise
        the underflow flag when they should have. (Problem reported by Doug
        Priest.)
      </li>

      <li>
        Added the <code>float_detect_tininess</code> variable to control whether
        tininess is detected before or after rounding.
      </li>
    </ul>

    <h3>Release 1 (1996 July)</h3>

    <ul>
      <li>
        Original release, based on work done for the International Computer
        Science Institute (ICSI) in Berkeley, California.
      </li>
    </ul>
  </body>
</html>
